<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bev√°s√°rl√≥lista + Heti √©trend + Receptek (k√©pekkel)</title>
  <meta name="description" content="Bev√°s√°rl√≥lista, heti √©trend √©s receptek. Az √©trend t√°bl√°zatban az √©telek kattinthat√≥k √©s a megfelel≈ë recepthez ugranak. Receptenk√©nt fot√≥." />
  <style>
    :root { --gap:12px; --pad:12px; --radius:12px; --brand:#2a775a; }
    * { box-sizing:border-box; }
    html, body { height:100%; }
    body { margin:0; background:#f6f7f9; color:#111; font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif; }
    header { position:sticky; top:0; z-index:10; background:var(--brand); color:#fff; padding:10px 14px; display:flex; align-items:center; gap:10px; }
    header h1 { font-size:1.1rem; margin:0; flex:1; }
    nav { display:flex; gap:8px; padding:10px; background:#f6f7f9; position:sticky; top:48px; z-index:9; }
    nav button { flex:1; padding:10px; border-radius:10px; border:1px solid #ddd; background:#fff; cursor:pointer; }
    nav button.active { background:#e8f5ee; border-color:var(--brand); color:var(--brand); }
    main { padding:8px 12px 60px; }
    .card { background:#fff; border-radius:var(--radius); padding:var(--pad); box-shadow:0 1px 6px rgba(0,0,0,.06); margin-bottom:var(--gap); }

    .item { display:flex; align-items:center; gap:10px; padding:10px 8px; border-bottom:1px solid #eee; }
    .item:last-child { border-bottom:none; }
    input[type="checkbox"] { width:22px; height:22px; accent-color:var(--brand); }
    label { font-size:1.05rem; line-height:1.35; flex:1; }

    .controls { display:flex; gap:8px; margin:8px 0 12px; }
    button { font-size:.95rem; padding:10px 12px; border-radius:10px; border:1px solid #ccc; background:#fff; cursor:pointer; }
    button.primary { background:var(--brand); color:#fff; border-color:var(--brand); }

    table { width:100%; border-collapse:collapse; min-width:640px; }
    th, td { text-align:left; padding:8px; border-bottom:1px solid #eee; vertical-align:top; }
    thead th { position:sticky; top:0; background:#f1f1f1; z-index:1; }
    .plan a { color:#0b5; text-decoration:none; border-bottom:1px dashed #0b5; }
    .plan a:hover { text-decoration:underline; }

    .hidden { display:none; }
    footer { position:sticky; bottom:0; padding:8px; background:#f6f7f9; font-size:.9rem; color:#444; }
    .small { color:#444; font-size:.92rem; }
    .notice { padding:.6rem .8rem; border:1px dashed #ccc; border-radius:8px; background:#fafafa; margin-bottom:.5rem; }
    .recipe-meta { display:flex; gap:10px; flex-wrap:wrap; margin:8px 0 12px; color:#333; }
    .recipe-meta span { background:#f6f7f9; border:1px solid #e5e5e5; border-radius:999px; padding:.25rem .55rem; }
    .recipes article { scroll-margin-top:120px; }
    .recipe-img { width:100%; max-width:560px; display:block; border-radius:10px; border:1px solid #e5e5e5; margin:6px 0 12px; object-fit:cover; }
  /* === K√∂z√©pre igaz√≠tott elrendez√©s az eg√©sz oldalra === */
        main { display: flex; justify-content: center; }
        main > section { width: 100%; max-width: 900px; }
        .card { margin-left: auto; margin-right: auto; }
        #view-lista .card h2, #view-etrend .card h2, #view-receptek .card h2 { text-align: center; }
        .plan table { margin: 0 auto; } /* √©trend t√°bl√°zat k√∂z√©pre */
        
        /* === Receptek: minden elem ugyanabba a has√°bba (k√©p sz√©less√©ge) === */
        .recipes .card > .recipe-img,
        .recipes .card > .recipe-meta,
        .recipes .card > p,
        .recipes .card > ul,
        .recipes .card > ol {
          max-width: 560px;       /* ugyanaz, mint a k√©pn√©l */
          margin-left: auto;
          margin-right: auto;     /* k√∂z√©pre igaz√≠t√°s */
        }
        
        /* Sz√∂veg igaz√≠t√°sa a has√°bon bel√ºl */
        .recipes .card p,
        .recipes .card ul,
        .recipes .card ol { text-align: left; line-height: 1.55; }
        
        /* Mobil finomhangol√°s */
        @media (max-width: 600px) {
          body { font-size: 16px; }
          nav { flex-direction: column; }
          nav button { width: 100%; font-size: 1rem; padding: 12px; }
          .card { padding: 14px; }
          .recipe-img { max-width: 100%; height: auto; }
          ul { padding-left: 20px; margin-top: 4px; margin-bottom: 8px; }
        }
  </style>
</head>
<body>
  <header>
    <h1>Bev√°s√°rl√≥lista + Heti √©trend + Receptek</h1>
  </header>

  <nav>
    <button class="active" id="tab-lista" type="button" aria-controls="view-lista" aria-selected="true">Bev√°s√°rl√≥lista</button>
    <button id="tab-etrend" type="button" aria-controls="view-etrend" aria-selected="false">Heti √©trend</button>
    <button id="tab-receptek" type="button" aria-controls="view-receptek" aria-selected="false">Receptek</button>
  </nav>

  <main>
    <!-- LISTA -->
    <section id="view-lista" role="region" aria-labelledby="tab-lista">
      <div class="notice small">A pip√°k automatikusan <b>elment≈ëdnek</b> ezen az eszk√∂z√∂n (helyi t√°rol√≥).</div>
      <div class="controls">
        <button class="primary" id="checkAll" type="button">√ñsszes kipip√°l√°sa</button>
        <button id="uncheckAll" type="button">√ñsszes √ºr√≠t√©se</button>
      </div>

      <section class="card"><h2>Feh√©rjeforr√°sok</h2>
        <div class="item"><input type="checkbox" id="item_1"><label for="item_1">Csirkemellfil√© ‚Äì 800‚Äì1000 g</label></div>
        <div class="item"><input type="checkbox" id="item_2"><label for="item_2">Pulykamell / csirkecomb ‚Äì 500 g</label></div>
        <div class="item"><input type="checkbox" id="item_3"><label for="item_3">Tonhal konzerv (v√≠zben) ‚Äì 3 db</label></div>
        <div class="item"><input type="checkbox" id="item_4"><label for="item_4">Lazac ‚Äì 2 szelet (kb. 300 g)</label></div>
        <div class="item"><input type="checkbox" id="item_5"><label for="item_5">Toj√°s ‚Äì 10 db</label></div>
        <div class="item"><input type="checkbox" id="item_6"><label for="item_6">Kefir / nat√∫r joghurt ‚Äì 2 db (500 ml-es)</label></div>
        <div class="item"><input type="checkbox" id="item_7"><label for="item_7">N√∂v√©nyi tej (mandula / zab) ‚Äì 1 l</label></div>
      </section>

      <section class="card"><h2>Z√∂lds√©gek √©s sal√°t√°k</h2>
        <div class="item"><input type="checkbox" id="item_8"><label for="item_8">Brokkoli ‚Äì 500 g</label></div>
        <div class="item"><input type="checkbox" id="item_9"><label for="item_9">Cukkini ‚Äì 2 db</label></div>
        <div class="item"><input type="checkbox" id="item_10"><label for="item_10">R√©pa ‚Äì 500 g</label></div>
        <div class="item"><input type="checkbox" id="item_11"><label for="item_11">Paradicsom ‚Äì 4‚Äì5 db</label></div>
        <div class="item"><input type="checkbox" id="item_12"><label for="item_12">Uborka ‚Äì 2 db</label></div>
        <div class="item"><input type="checkbox" id="item_13"><label for="item_13">Z√∂ldbab ‚Äì 400 g</label></div>
        <div class="item"><input type="checkbox" id="item_14"><label for="item_14">Spen√≥t / sal√°takever√©k ‚Äì 1‚Äì2 csomag</label></div>
        <div class="item"><input type="checkbox" id="item_15"><label for="item_15">√âdesburgonya ‚Äì 2 db</label></div>
        <div class="item"><input type="checkbox" id="item_16"><label for="item_16">Citrom ‚Äì 2 db</label></div>
      </section>

      <section class="card"><h2>Gy√ºm√∂lcs√∂k</h2>
        <div class="item"><input type="checkbox" id="item_17"><label for="item_17">Ban√°n ‚Äì 4‚Äì5 db</label></div>
        <div class="item"><input type="checkbox" id="item_18"><label for="item_18">Alma ‚Äì 4 db</label></div>
        <div class="item"><input type="checkbox" id="item_19"><label for="item_19">Narancs ‚Äì 2 db</label></div>
        <div class="item"><input type="checkbox" id="item_20"><label for="item_20">Fagyasztott bogy√≥s gy√ºm√∂lcs ‚Äì 1 csomag (250 g)</label></div>
      </section>

      <section class="card"><h2>Gabona / k√∂ret</h2>
        <div class="item"><input type="checkbox" id="item_21"><label for="item_21">Zabpehely ‚Äì 500 g</label></div>
        <div class="item"><input type="checkbox" id="item_22"><label for="item_22">Barna rizs ‚Äì 500 g</label></div>
        <div class="item"><input type="checkbox" id="item_23"><label for="item_23">Bulgur / quinoa ‚Äì 250 g</label></div>
        <div class="item"><input type="checkbox" id="item_24"><label for="item_24">Teljes ki≈ërl√©s≈± keny√©r ‚Äì 1 csomag</label></div>
        <div class="item"><input type="checkbox" id="item_25"><label for="item_25">Teljes ki≈ërl√©s≈± t√©szta ‚Äì 250 g</label></div>
        <div class="item"><input type="checkbox" id="item_26"><label for="item_26">Kuszkusz ‚Äì 250 g</label></div>
      </section>

      <section class="card"><h2>Magvak √©s olajok</h2>
        <div class="item"><input type="checkbox" id="item_27"><label for="item_27">Di√≥ ‚Äì 150 g</label></div>
        <div class="item"><input type="checkbox" id="item_28"><label for="item_28">Mandula ‚Äì 100 g</label></div>
        <div class="item"><input type="checkbox" id="item_29"><label for="item_29">T√∂kmag ‚Äì 100 g</label></div>
        <div class="item"><input type="checkbox" id="item_30"><label for="item_30">Chia mag ‚Äì 100 g</label></div>
        <div class="item"><input type="checkbox" id="item_31"><label for="item_31">Lenmag ‚Äì 100 g</label></div>
        <div class="item"><input type="checkbox" id="item_32"><label for="item_32">Extra sz≈±z ol√≠vaolaj ‚Äì 250 ml</label></div>
        <div class="item"><input type="checkbox" id="item_33"><label for="item_33">Nat√∫r mogyor√≥vaj ‚Äì 200‚Äì250 g</label></div>
      </section>

      <section class="card"><h2>Egy√©b</h2>
        <div class="item"><input type="checkbox" id="item_34"><label for="item_34">Lencse ‚Äì 1 db konzerv / 250 g sz√°raz</label></div>
        <div class="item"><input type="checkbox" id="item_35"><label for="item_35">Kukorica konzerv ‚Äì 1‚Äì2 db</label></div>
        <div class="item"><input type="checkbox" id="item_36"><label for="item_36">Humusz ‚Äì 1 doboz</label></div>
        <div class="item"><input type="checkbox" id="item_37"><label for="item_37">Kamillatea ‚Äì 1 doboz</label></div>
        <div class="item"><input type="checkbox" id="item_38"><label for="item_38">Alap f≈±szerek: s√≥, bors, oreg√°n√≥, fokhagyma, paprika</label></div>
      </section>
    </section>

    <!-- √âTREND (kattinthat√≥ linkek a receptekhez) -->
    <section id="view-etrend" class="hidden" role="region" aria-labelledby="tab-etrend">
      <div class="card plan">
        <h2>Heti √©trend ‚Äì kattints egy √©telre a recepthez</h2>
        <div class="small" style="margin-bottom:8px;">A link a ‚ÄûReceptek‚Äù f√ºl√∂n a megfelel≈ë le√≠r√°shoz ugrik.</div>
        <div style="overflow-x:auto;">
          <table>
            <thead>
              <tr><th>Nap</th><th>Reggeli</th><th>Eb√©d</th><th>Uzsonna</th><th>Vacsora</th></tr>
            </thead>
            <tbody>
              <tr>
                <td>H√©tf≈ë</td>
                <td><a href="#recept-zabkasa">Zabk√°sa mandulaitallal, lenmaggal, ban√°nnal</a></td>
                <td><a href="#recept-grillezett-csirkemell-salata">Grillezett csirkemell, barna rizs, ol√≠vaolajos sal√°ta</a></td>
                <td><a href="#recept-snack-dio-alma">Di√≥ + alma</a></td>
                <td><a href="#recept-parolt-zoldseg-rantotta">P√°rolt z√∂lds√©gek + f≈ëtt toj√°s</a></td>
              </tr>
              <tr>
                <td>Kedd</td>
                <td><a href="#recept-avokados-kenyer">Avok√°d√≥s teljes ki≈ërl√©s≈± keny√©r paradicsommal</a></td>
                <td><a href="#recept-lazac-edesburgonyaval">Lazac (vagy tonhal) √©desburgony√°val</a></td>
                <td><a href="#recept-joghurt-chia">Kefir vagy n√∂v√©nyi joghurt chia maggal</a></td>
                <td><a href="#recept-zoldseges-rizotto">Z√∂lds√©ges rizott√≥ ol√≠vaolajjal</a></td>
              </tr>
              <tr>
                <td>Szerda</td>
                <td><a href="#recept-zabpalacsinta-mogyorovaj">Zabpalacsinta mogyor√≥vajjal</a></td>
                <td><a href="#recept-pulykamell-kuszkusszal">Pulykamell kuszkusszal, uborkasal√°t√°val</a></td>
                <td><a href="#recept-snack-tokmag">T√∂kmag</a></td>
                <td><a href="#recept-lencsefozelek-tojas">Lencsef≈ëzel√©k + f≈ëtt toj√°s</a></td>
              </tr>
              <tr>
                <td>Cs√ºt√∂rt√∂k</td>
                <td><a href="#recept-gyumolcsturmix">Gy√ºm√∂lcsturmix (ban√°n, bogy√≥sok, zabital)</a></td>
                <td><a href="#recept-csirkemell-quinoa-zoldbab">Csirkemell, quinoa, z√∂ldbab</a></td>
                <td><a href="#recept-snack-narancs-mandula">Narancs + mandula</a></td>
                <td><a href="#recept-zoldsegleves-piritos">Z√∂lds√©gleves + teljes ki≈ërl√©s≈± pir√≠t√≥s</a></td>
              </tr>
              <tr>
                <td>P√©ntek</td>
                <td><a href="#recept-snack-zabkeksz-tea">Zabkeksz + kamillatea</a></td>
                <td><a href="#recept-tonhalsalata">Tonhalsal√°ta</a></td>
                <td><a href="#recept-snack-dio-kesudio">Di√≥ vagy kesudi√≥</a></td>
                <td><a href="#recept-parolt-zoldseg-rantotta">P√°rolt z√∂lds√©gek + r√°ntotta</a></td>
              </tr>
              <tr>
                <td>Szombat</td>
                <td><a href="#recept-humuszos-piritos">Teljes ki≈ërl√©s≈± pir√≠t√≥s humusszal</a></td>
                <td><a href="#recept-sult-csirkecomb-bulgur-salata">S√ºlt csirkecomb, bulgur, sal√°ta</a></td>
                <td><a href="#recept-snack-alma-mandula">Alma + mandula</a></td>
                <td><a href="#recept-zoldseges-teszta">Z√∂lds√©ges t√©szta (teljes ki≈ërl√©s≈±)</a></td>
              </tr>
              <tr>
                <td>Vas√°rnap</td>
                <td><a href="#recept-rantotta-zoldseggel">Toj√°sr√°ntotta z√∂lds√©gekkel</a></td>
                <td><a href="#recept-lazacos-vagy-tonhalas-rizs-salataval">Lazacos / tonhalas rizs sal√°t√°val</a></td>
                <td><a href="#recept-joghurtos-zab">Joghurttal kevert zab</a></td>
                <td><a href="#recept-sult-zoldseg-rizzsel">S√ºlt z√∂lds√©g, kev√©s rizs</a></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- RECEPTEK -->
    <section id="view-receptek" class="hidden" role="region" aria-labelledby="tab-receptek">
      <div class="card"><h2>Receptek</h2><p class="small">Az √©trend t√°bl√°zatban egy √©telre kattintva ide ugrik a megfelel≈ë recepthez.</p></div>

      <div class="recipes">
        <article id="recept-zabkasa" class="card">
          <h3>Zabk√°sa mandulaitallal, lenmaggal, ban√°nnal</h3>
          <img class="recipe-img" src="images/zabkasa.png" alt="Zabk√°sa mandulaitallal √©s ban√°nnal">
          <div class="recipe-meta"><span>‚è± 10‚Äì12 perc</span><span>üçΩ 1 adag</span><span>ü•£ k√∂nny≈±</span></div>
          <p><strong>Hozz√°val√≥k (1 adag):</strong></p>
          <ul>
            <li>50 g zabpehely</li>
            <li>200 ml mandulaital</li>
            <li>¬Ω ban√°n (kb. 50 g)</li>
            <li>1 te√°skan√°l (5 g) ≈ër√∂lt lenmag</li>
            <li>¬º te√°skan√°l fah√©j</li>
            <li>1 csipet s√≥</li>
          </ul>
          <p><strong>Elk√©sz√≠t√©s:</strong><br>
          Forrald fel a mandulaitalt, add hozz√° a zabpelyhet √©s f≈ëzd 3‚Äì5 percig.  
          Keverd bele a fah√©jat √©s a lenmagot, t√°lal√°skor tedd r√° a szeletelt ban√°nt.</p>
        </article>



        <article id="recept-grillezett-csirkemell-salata" class="card">
          <h3>Grillezett csirkemell, barna rizs, ol√≠vaolajos sal√°ta</h3>
          <img class="recipe-img" src="images/grillezett_csirkemell_salata.png" alt="Grillezett csirkemell rizzsel √©s sal√°t√°val">
          <div class="recipe-meta"><span>‚è± 25‚Äì30 perc</span><span>üçΩ 1 adag</span></div>
          <p><strong>Hozz√°val√≥k (1 adag):</strong></p>
          <ul>
            <li>120 g csirkemellfil√©</li>
            <li>80 g f≈ëtt barna rizs (nyersen kb. 30 g)</li>
            <li>80 g sal√°takever√©k</li>
            <li>1 te√°skan√°l (5 ml) extra sz≈±z ol√≠vaolaj</li>
            <li>¬Ω te√°skan√°l citroml√©</li>
            <li>csipet s√≥, bors</li>
          </ul>
          <p><strong>Elk√©sz√≠t√©s:</strong><br>
          A csirkemellet s√≥zd, borsozd, √©s grillserpeny≈ëben s√ºsd 2√ó3 percig.  
          A rizst f≈ëzd meg, a sal√°t√°t keverd √∂ssze ol√≠vaolajjal √©s citroml√©vel.</p>
        </article>



        <article id="recept-tonhalsalata" class="card">
          <h3>Tonhalsal√°ta</h3>
          <img class="recipe-img" src="images/tonhalsalata.png" alt="Tonhalsal√°ta kukoric√°val √©s ubork√°val">
          <div class="recipe-meta"><span>‚è± 10 perc</span><span>üçΩ 1 adag</span></div>
          <p><strong>Hozz√°val√≥k (1 adag):</strong></p>
          <ul>
            <li>100 g tonhal konzerv (v√≠zben, lecs√∂p√∂gtetve)</li>
            <li>60 g csemegekukorica</li>
            <li>80 g uborka</li>
            <li>1 te√°skan√°l (5 ml) ol√≠vaolaj</li>
            <li>1 te√°skan√°l citroml√©</li>
            <li>s√≥, bors √≠zl√©s szerint</li>
          </ul>
          <p><strong>Elk√©sz√≠t√©s:</strong><br>
          A hozz√°val√≥kat keverd √∂ssze egy t√°lban, locsold meg ol√≠vaolajjal √©s citroml√©vel.  
          T√°lal√°s el≈ëtt h≈±tsd be p√°r percre.</p>
        </article>


        <article id="recept-lazac-edesburgonyaval" class="card">
          <h3>Lazac (vagy tonhal) √©desburgony√°val</h3>
          <img class="recipe-img" src="images/lazac_edesburgonyaval.png" alt="S√ºlt lazac √©desburgony√°val">
          <div class="recipe-meta"><span>‚è± 25‚Äì30 perc</span><span>üçΩ 1 adag</span></div>
          <p><strong>Hozz√°val√≥k (1 adag):</strong></p>
          <ul>
            <li>150 g lazacfil√©</li>
            <li>200 g √©desburgonya</li>
            <li>1 te√°skan√°l (5 ml) ol√≠vaolaj</li>
            <li>s√≥, bors √≠zl√©s szerint</li>
            <li>1 szelet citrom (d√≠sz√≠t√©shez)</li>
          </ul>
          <p><strong>Elk√©sz√≠t√©s:</strong><br>
          Az √©desburgony√°t 200¬∞C-on s√ºsd 25‚Äì30 percig.  
          A lazacot s√≥zd, borsozd, √©s serpeny≈ëben s√ºsd 2√ó3 percig.  
          T√°lal√°skor locsold meg citrommal.</p>
        </article>



        <!-- Ide j√∂nnek majd a t√∂bbiek (ugyan√≠gy, saj√°t k√©pf√°jln√©vvel az images/ mapp√°b√≥l) -->
      </div>
    </section>
  </main>

  <footer> Tipp: ha √∫jra megnyitod ezt az oldalt a telefonon, a pip√°k megmaradnak ezen az eszk√∂z√∂n. </footer>

  <script>
  (function(){
    // Tabok
    var tabLista = document.getElementById('tab-lista');
    var tabEtrend = document.getElementById('tab-etrend');
    var tabReceptek = document.getElementById('tab-receptek');
    var viewLista = document.getElementById('view-lista');
    var viewEtrend = document.getElementById('view-etrend');
    var viewReceptek = document.getElementById('view-receptek');

    function addClass(el, name){ if(el && el.className.indexOf(name)===-1) el.className += ' ' + name; }
    function removeClass(el, name){ if(!el) return; el.className = el.className.replace(new RegExp('\\b'+name+'\\b','g'),'').replace(/\s+/g,' ').trim(); }

    function show(tab){
      if(tab==='lista'){
        addClass(tabLista,'active'); removeClass(tabEtrend,'active'); removeClass(tabReceptek,'active');
        removeClass(viewLista,'hidden'); addClass(viewEtrend,'hidden'); addClass(viewReceptek,'hidden');
        tabLista.setAttribute('aria-selected','true'); tabEtrend.setAttribute('aria-selected','false'); tabReceptek.setAttribute('aria-selected','false');
      }else if(tab==='etrend'){
        addClass(tabEtrend,'active'); removeClass(tabLista,'active'); removeClass(tabReceptek,'active');
        removeClass(viewEtrend,'hidden'); addClass(viewLista,'hidden'); addClass(viewReceptek,'hidden');
        tabEtrend.setAttribute('aria-selected','true'); tabLista.setAttribute('aria-selected','false'); tabReceptek.setAttribute('aria-selected','false');
      }else if(tab==='receptek'){
        addClass(tabReceptek,'active'); removeClass(tabLista,'active'); removeClass(tabEtrend,'active');
        removeClass(viewReceptek,'hidden'); addClass(viewLista,'hidden'); addClass(viewEtrend,'hidden');
        tabReceptek.setAttribute('aria-selected','true'); tabLista.setAttribute('aria-selected','false'); tabEtrend.setAttribute('aria-selected','false');
      }
    }

    if(tabLista && tabEtrend && tabReceptek){
      tabLista.addEventListener('click', function(){ show('lista'); });
      tabEtrend.addEventListener('click', function(){ show('etrend'); });
      tabReceptek.addEventListener('click', function(){ show('receptek'); });
    }

    // Bev√°s√°rl√≥lista ment√©s
    var STORAGE_KEY = 'bevasarlolista_clickable_v2';
    function loadState(){
      try{
        var raw = localStorage.getItem(STORAGE_KEY) || '{}';
        var saved = JSON.parse(raw);
        var boxes = document.querySelectorAll('input[type=checkbox]');
        for(var i=0;i<boxes.length;i++){
          var id = boxes[i].id;
          if(saved.hasOwnProperty(id)) boxes[i].checked = !!saved[id];
        }
      }catch(e){}
    }
    function saveState(){
      var boxes = document.querySelectorAll('input[type=checkbox]');
      var obj = {};
      for(var i=0;i<boxes.length;i++){ obj[boxes[i].id] = boxes[i].checked; }
      try{ localStorage.setItem(STORAGE_KEY, JSON.stringify(obj)); }catch(e){}
    }
    var checkAll = document.getElementById('checkAll');
    var uncheckAll = document.getElementById('uncheckAll');
    if(checkAll) checkAll.addEventListener('click', function(){
      var boxes = document.querySelectorAll('input[type=checkbox]');
      for(var i=0;i<boxes.length;i++){ boxes[i].checked = true; }
      saveState();
    });
    if(uncheckAll) uncheckAll.addEventListener('click', function(){
      var boxes = document.querySelectorAll('input[type=checkbox]');
      for(var i=0;i<boxes.length;i++){ boxes[i].checked = false; }
      saveState();
    });
    document.addEventListener('change', function(e){
      var t = e.target || e.srcElement;
      if(t && t.matches && t.matches('input[type=checkbox]')) saveState();
    });

    // Hash alap√∫ navig√°ci√≥: #recept-... ‚Üí Recepteket mutat + odag√∂rget
    function handleHash(){
      if(location.hash && location.hash.indexOf('#recept-')===0){
        show('receptek');
        try {
          var target = document.getElementById(location.hash.substring(1));
          if(target){ target.scrollIntoView({behavior:'smooth', block:'start'}); }
        } catch(e){}
      }
    }
    window.addEventListener('hashchange', handleHash);

    // Init
    if(document.readyState==='loading'){ document.addEventListener('DOMContentLoaded', function(){ loadState(); handleHash(); }); }
    else { loadState(); handleHash(); }
  })();
  </script>
</body>
</html>
